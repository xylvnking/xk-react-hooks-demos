import React, {useEffect, useState} from 'react'
import type { NextPage } from 'next'
import { useRouter } from 'next/router'
import Head from 'next/head'
import UseStateHook from './Components/UseStateHook' 
import UseEffectHook from './Components/UseEffectHook' 
import UseContextHook from './Components/UseContextHook' 
import UseMemoHook from './Components/UseMemoHook' 
import UseReducerHook from './Components/UseReducerHook' 
import UseCallbackHook from './Components/UseCallbackHook' 
import UseRefHook from './Components/UseRefHook' 
import Layout from './Components/Layout' 
import HomePage from './Components/HomePage'
import layoutStyles from '../styles/Layout.module.scss'
import navStyles from '../styles/Nav.module.scss'


const Home: NextPage = () => {
  const router = useRouter()
  const [hookSelected, setHookSelected] = useState<string>('')
  // const [layoutOpen, setLayoutOpen] = useState<boolean>(true)

  const RenderSwitch = () => {
    switch(hookSelected) {
      case 'useState':
        return <UseStateHook />;
      case 'useEffect':
        return <UseEffectHook />;
      case 'useContext':
        return <UseContextHook />;
      case 'useMemo':
        return <UseMemoHook />;
      case 'useReducer':
        return <UseReducerHook />;
      case 'useCallback':
        return <UseCallbackHook />;
      case 'useRef':
        return <UseRefHook />;
      default:
        return <HomePage />
    }
  }

  useEffect(() => {
    if (router.query.hook && typeof router.query.hook == 'string') {
      if (router.query.hook == 'home') {
        setHookSelected(router.query.hook)
        router.push('/', undefined, { shallow: true })
      } else {
        setHookSelected(router.query.hook)
      }
    }
  }, [router.query])

  useEffect(() => {
    if (document.getElementById("mainStuff")) {
      document.getElementById('mainStuff')?.scrollIntoView({ behavior: 'smooth' });
    }
  }, [hookSelected])
  
  return (
    <div>
      <Head>
        <title>Hook Demos</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="favicon.ico?v=1.1" />
      </Head>
        <nav className={navStyles.navContainer}>
          <h1 className={navStyles.navTitle}>REACT TYPESCRIPT HOOKS</h1>
          <span style={{fontSize: '15px'}} className={navStyles.desc}>personal reference docs by <a target='_blank' href='https://github.com/xylvnking'>xylvn king</a></span>
        </nav>
      <main className={layoutStyles.grid}>
        {
          <section className={layoutStyles.layoutColumn} >
            <Layout 
              selectHook={setHookSelected}
              hookSelected={hookSelected}
            />
          </section> 
        }
        <section className={layoutStyles.hookComponentsColumn} id='mainStuff'>
          { RenderSwitch() }
        </section>
      </main>
    </div>
  )
}

export default Home
